<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.ball {
				width: 100px;
				height: 100px;
				border-radius: 50px;
				background-color: red;
				position: absolute;
				top: 100px;
				left: 100px;
			}

			.box {
				width: 50px;
				height: 50px;
				border-radius: 25px;
				background-color: #0000FF;
				position: absolute;
				top: 25px;
				left: 25px;
			}
		</style>
	</head>
	<body>
		<button type="button">后退</button><button type="button">前进</button>
		<div class="ball">
			<div class="box"></div>
		</div>
		<script type="text/javascript">
			let aBtn = document.querySelectorAll("button")
			let oBall = document.querySelector('.ball')
			oBall.timer = null
			// aBtn[0].onclick = backwards
			// aBtn[1].onclick = forwards

			aBtn[0].onclick = function() {
				doMove(oBall, "left", 100, -1, 2)
			}
			aBtn[1].onclick = function() {
				doMove(oBall, "left", 800, +1, 2)
			}

			function doMove(obj, attr, target, step, speed) {

				// function backwards() {
				clearInterval(obj.timer)   //防止再次点击
				obj.timer = setInterval(function() {
					let oLeft = parseInt(window.getComputedStyle(obj)[attr])
					if (oLeft == target) {
						oLeft = target
					}
					// oLeft--
					obj.style[attr] = oLeft + step + "px"
					if (oLeft == target) {
						oLeft = target
					}
				}, speed)
			}

			// function forwards() {
			// 	clearInterval(oBall.timer)
			// 	oBall.timer = setInterval(function() {
			// 		let oLeft = parseInt(window.getComputedStyle(oBall).left)
			// 		if (oLeft > 1200) {
			// 			oLeft = 0
			// 		}
			// 		oLeft++
			// 		oBall.style.left = oLeft + "px"
			// 	}, 2)
			// }
		</script>
	</body>
</html>
