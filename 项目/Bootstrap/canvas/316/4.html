<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			body {
				margin: 0;
			}

			#myCanvas {
				box-shadow: 0px 0px 30px black;
				background-color: #f4f4f4;
				position: absolute;
				left: 100px;
				top: 100px
			}
		</style>
		<script src="./tools.js" type="text/javascript">

		</script>
	</head>
	<body>
		<canvas id="myCanvas"></canvas>
		<script>
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d"); //引入绘图环境2d
			let W = canvas.width = 800
			let H = canvas.height = 500
			let mouse = C.getMousePos(canvas)
			canvas.addEventListener("mousemove", function() {
				ctx.clearRect(0,0,W,H)
				let dx = mouse.x - W / 2
				let dy = mouse.y - H / 2
				let angle = Math.atan2(dy,dx) * 180 / Math.PI
				// let angle = Math.atan(dy / dx) * Math.PI / 180
				createCS()
				ctx.beginPath()
				ctx.lineTo(mouse.x,mouse.y)
				ctx.lineTo(W/2,H/2)
				ctx.stroke()
				ctx.font= "30px arial"
				ctx.fillStyle ="red"
				ctx.fillText(angle,mouse.x,mouse.y)
			})
			createCS()

			function createCS() {
				ctx.save() //保存当前图像状态的一份拷贝。
				ctx.beginPath()
				ctx.moveTo(0, H / 2)
				ctx.lineTo(W, H / 2)
				ctx.moveTo(W / 2, 0)
				ctx.lineTo(W / 2, H)
				ctx.stroke()
				ctx.restore() //restore() 方法从栈中弹出存储的图形状态并恢复 CanvasRenderingContext2D 对象的属性、剪切路径和变换矩阵的值。
			}
		</script>
	</body>
</html>
