<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}

			.box {
				background-color: red;
				width: 80px;
				height: 80px;
				position: absolute;
				top: 0;
				left: 0;
				/* z-index: 1; */

			}
		</style>
	</head>
	<body>
		<div class="box"></div>
		 <script type="text/javascript">
			//获取元素
			let oDiv = null
			let x = y = 0
			window.onload = function() {
				oDiv = document.querySelector('.box')
				init()
			}

			function init() {
				oDiv.onmousedown = fnDown
			}
			//按下鼠标时 拖动div,改变div的left和top值
			function fnDown(ev) {
				x = ev.clientX - this.offsetLeft
				y = ev.clientY - this.offsetTop
				document.onmousemove = fnMove
				document.onmouseup = fnUp
			}

			function fnMove(ev) {
				oDiv.style.left = ev.clientX - x + "px"
				oDiv.style.top = ev.clientY - y + "px"
			}

			function fnUp() {

				document.onmousemove = document.onmouseup = null
			}
		
	// 1.不能出现函数嵌套函数
	// 2.把局部变量改写全局
	// 3.把赋予值语以外的代码写在一个函数里面
    // 4.修改this
			//原始状态
			// window.onload = function() {
			//     // 获取元素
			// 			let	oDiv = document.querySelector('.box')
			// 			let x = y = 0
						
			//      //按下鼠标时 拖动div,改变div的left和top值
			// 	oDiv.onmousedown = function(ev) {
			// 		let x = ev.clientX - this.offsetLeft
			// 		let y = ev.clientY - this.offsetTop
			// 	document.onmousemove = function(ev) {
						
			// 			oDiv.style.left = ev.clientX - x + "px"
			// 			oDiv.style.top = ev.clientY - y + "px"
			// 		}
			
			// 	document.onmouseup = function() {
			// 			document.onmousemove = null
			// 			document.onmouseup = null
			// 		}
			// 	}
		 //    }
			</script>
	</body>
</html>
