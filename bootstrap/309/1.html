<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			.box1 {
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				left: 0;
				top: 0;
			}

			.box2 {

				width: 100px;
				height: 100px;
				background: blue;
				position: absolute;
				left: 0;
				top:100px;

			}
		</style>
	</head>
	<body>
		<div class="box1"></div>
		<div class="box2"></div>



		<script type="text/javascript">
			//~1~游览器知道：1.你希望执行一个动画 2.绘制动画，必须调用callback进行下一次动画的绘制
			// console.log(window.requestAnimationFrame(callback)) //返回值
			// function callback() {
			// console.log(window.requestAnimationFrame(callback)) //递归，返回值表示本次动画的id,可以理解播放的次数
			// }

			//~2~
			const box1 = document.querySelector('.box1')
			const box2 = document.querySelector('.box2')
			let num = 0
			let xPos = 0

			function fn1() {
				num++
				box1.innerHTML = "流星雨" + num
				if (num < 250) {
					window.requestAnimationFrame((fn1))
				}
			}
			window.requestAnimationFrame((fn1))

			// function move(x) {
			// 	let n = x - num
			// 	// xPos = xPos + 2
			// 	// box2.style.transform = ` translateX(${xPos++}px)`
				
			// 	if (xPos <= winW) {
			// 		box2.style.transform = ` translateX(${xPos++}px)`
			// 		// window.requestAnimationFrame(move)
			// 	} else {
			// 		box2.style.transform = ` translateX(${xPos--}px)`

			// 	}
			// 	window.requestAnimationFrame(move)

			// }
			// window.requestAnimationFrame(move)

			let g = true;
	        let winW = document.documentElement.clientWidth - 100 //游览器窗口宽度

			function render() {
				if (g == true) {
					if (xPos >= winW) {
						g = false
					}
					box2.style.transform = ` translateX(${xPos++}px)`
				} else {
					if (xPos <= 0 ){
						g = true
					}
					box2.style.transform = ` translateX(${xPos--}px)`
					
				}
				window.requestAnimationFrame(render)
			}
			window.requestAnimationFrame(render)

			// //requestAnimationFrame效果
			// (function animloop() {
			// 	render();
			// 	window.requestAnimationFrame(animloop);
			// })();
			
			
			// var flag = true;
			// var left = 0;
			
			// function render() {
			// 	if (flag == true) {
			// 		if (left >=888) {
			// 			flag = false
			// 		}
			// 		box1.style.left = ` ${left++}px`
			// 	} else {
			// 		if (left <= 0) {
			// 			flag = true
			// 		}
			// 		box1.style.left = ` ${left--}px`
			// 	}
			// }
			
			// //requestAnimationFrame效果
			// (function animloop() {
			// 	render();
			// 	window.requestAnimationFrame(animloop);
			// })();
		</script>
	</body>
</html>
