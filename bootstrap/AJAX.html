<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<button onclick="showCountry()">显示</button>
		<div class="box"></div>
		<!-- 	<script type="text/javascript">
		      //创建XMLHttpRequest请求对象
			let xhr = new XMLHttpRequest()
			//xhr请求对象，有一些属性和方法使用。OPEN()设置请求参数
			xhr.open('get', 'https://restcountries.com/v3.1/all', true)
			xhr.onreadystatechange = function() {
				switch(this.readyState) {
					case 0:document.write("0:请求未初始化")
					console.log("0:请求未初始化")
						break;
					case 1:document.write("1:服务器链接已建立")
					console.log("1:服务器链接已建立")
						break;
					case 2:document.write("2:请求已收到")
					console.log("2:请求已收到")
							break;
					case 3:document.write("3:正在处理请求")
					console.log("3:正在处理请求")
							break;
					case 4:document.write("4:请求已完成且响应已就绪")
					console.log("4:请求已完成且响应已就绪")
							break;
					// defauit:
				}
			}
			xhr.send()
		</script> -->
		<script type="text/javascript">
		function showCountry(){
			let xhr = new XMLHttpRequest()
			xhr.open('get', 'https://restcountries.com/v3.1/all', true)
			xhr.onload = function(){
				if (xhr.status == 200) {
					// console.log('收到')
					// console.log(this.response)
					let data = JSON.parse(this.response)
					data.forEach(item => {
						console.log(item.name.common)
						const card = document.createElement('div')
						const cardImg = document.createElement('img')
						card.innerHTML = item.name.common
						cardImg.src = item.flags.png
						card.appendChild(cardImg)
						document.querySelector('.box').appendChild(card)
					})
				}
			}
			xhr.send()
		}
			
			
		</script>
	</body>
</html>
